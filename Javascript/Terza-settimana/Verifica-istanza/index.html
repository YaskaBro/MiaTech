<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Esercizi Javascript</title>
  </head>
  <body>
    <h1>
      Alcuni li faccio subito, altri mi ci incarto 6 anni e mezzo, molto bene!!
    </h1>
    <script>
      const AnnoAttuale = 2024;
      class Automobile {
        marca = "";
        modello = "";
        anno = 0;
        #chilometraggio = 0;
        #contatoreChiamate = 0;

        #calcolaEtà() {
          return AnnoAttuale - this.anno;
        }

        #incrementaContatore() {         
          this.#contatoreChiamate ++
        }
        
        set chilometraggio(nuovoChilometraggio) {
          if (nuovoChilometraggio < this.#chilometraggio) {
            throw 'stai provando a diminuire i km, non si fa'
          }
          this.#chilometraggio = nuovoChilometraggio;
        }

        get chilometraggioAttuale() {
          return 'ha ' + this.#chilometraggio + ' km';
        }

        controllaChilometri() {
          if (this.chilometraggio> 100000) {
            return 'la macchina ha superato la soglia di km consigliati'
          }
          else {
            return 'la macchina ha ancora pochi chilometri'
          }
        }

        constructor(marca, modello, anno, chilometraggio) {
          this.marca = marca;
          this.modello = modello;
          this.anno = anno;
          this.#chilometraggio = chilometraggio;
        }

        mostraEtà() {
          return this.#calcolaEtà();
        }

        aggiungiChilometri(km) {         
          this.#incrementaContatore();
          return (this.#chilometraggio = this.#chilometraggio + km);
        }

        mostraChilometraggio() {
          return this.#chilometraggio + "km percorsi";
        }

        descrizione() {
          return (
            this.marca +
            " " +
            this.modello +
            " " +
            this.anno +
            " " +
            this.chilometraggio +
            "km percorsi"
          );
        }

        static confrontaChilometraggio(auto1, auto2) {
          if (auto1.#chilometraggio> auto2.#chilometraggio) {
            return 'la macchina con più chilometri è ' + auto1.modello
          }
          else if (auto1.#chilometraggio < auto2.#chilometraggio) {
            return 'la macchina con più chilometri è ' + auto2.modello
          }
          else {
            return 'le auto hanno gli stessi km'
          }
        }

        static verificaIstanza(obj, classe) {
          if (obj instanceof classe) {
            return obj.modello + ' è una vettura' 
          }
          else {
            return obj.modello + ' non è una vettura'
          }
        }

        mostraContatoreChiamate() {
          return 'sono stati aggiunti km alla vettura ' + this.#contatoreChiamate + ' volte.'
        }
      }

      class Elettrica extends Automobile {
        autonomia = 0;

        constructor(marca, modello, anno, chilometraggio, autonomia) {
          super(marca, modello, anno, chilometraggio);
          this.autonomia = autonomia;
        }

        descrizione() {
          return (
            this.marca +
            " " +
            this.modello +
            " " +
            this.anno +
            " " +
            this.chilometraggio +
            "km percorsi " +
            this.autonomia +
            "km di autonomia"
          );
        }

        ricarica(kmDaAggiungere) {
          return (this.autonomia = this.autonomia + kmDaAggiungere);
        }
      }

      class Camion extends Automobile {
        constructor(marca, modello, anno, chilometraggio, caricoMassimo) {
          super(marca, modello, anno, chilometraggio);
          this.caricoMassimo = caricoMassimo;
        }

        descrizione() {
          return (
            this.marca +
            " " +
            this.modello +
            " " +
            this.anno +
            " " +
            this.chilometraggio +
            "km percorsi " +
            this.caricoMassimo +
            "kg trasportabili"
          );
        }
        
        carica(kg) {
          if (kg <= this.caricoMassimo) {
            return 'hai aggiunto ' + kg + ' kg alla vettura'
          }
          else {
            return 'il carico che stai aggiungendo supera la portata massima della vettura'
          }
        }
      }

      const viper = new Automobile("dodge", "viper", 2010, 0);

      const gt = new Automobile("mustang", "gt", 2023, 10000);

      viper.aggiungiChilometri(10000);
      
      viper.aggiungiChilometri(10000);
      
      viper.aggiungiChilometri(10000);

      const model3 = new Elettrica("tesla", "model 3", 2024, 600, 500);

      model3.ricarica(100);

      Automobile.prototype.saluta = function () {
        return (
          "ciao sono la tua " + this.marca + " " + this.modello + " come stai?"
        );
      };


      const actros2645 = new Camion("mercedes-benz", "actros2645", 2016, 500000, 2000)

      console.log(actros2645);

      const vettura = new Automobile("iveco", "asfaf", 2020, 200000)

      const vettura2 = new Camion ("iveco", "asfaf", 2020, 200000, 10000)

      if (vettura instanceof Camion) {
        document.write('è un camion ')
      } else if (vettura instanceof Automobile) {
        document.write('è una macchina ')
      } else {document.write('non so cosa sia')};

      
      if (vettura2 instanceof Camion) {
        document.write('è un camion ')
      } else if (vettura2 instanceof Automobile) {
        document.write('è una macchina ')
      } else {document.write('non so cosa sia')}

      console.log(Camion.verificaIstanza(actros2645, Camion))
    </script>
  </body>
</html>
